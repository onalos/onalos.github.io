<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Healthcare@ThreatPodium ‚Äî Stats</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 style-src 'self' 'unsafe-inline';
                 script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;
                 script-src-attr 'unsafe-inline';">
  <script src="theme.js"></script>
  <style>
    :root {
      --bg-color: #f7f9fb;
      --text-color: #222;
      --link-color: #005f8e;
      --card-bg: #ffffff;
    }

    body.dark-mode {
      --bg-color: #121212;
      --text-color: #f1f1f1;
      --link-color: #58a6ff;
      --card-bg: #1e1e1e;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      margin: 0;
      padding: 1rem;
      transition: background 0.3s, color 0.3s;
    }

    header, footer {
      text-align: center;
      margin-bottom: 1rem;
    }

    h1 {
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
    }

    .toggle {
      display: inline-block;
      padding: 0.4rem 1rem;
      border: 1px solid var(--text-color);
      background: none;
      color: var(--text-color);
      border-radius: 5px;
      cursor: pointer;
      margin-bottom: 1rem;
    }

    nav.navbar {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }

    nav.navbar a {
      padding: 0.6rem 1rem;
      background: #0077b6;
      color: #fff;
      text-decoration: none;
      border-radius: 5px;
      font-weight: 600;
      font-size: 0.95rem;
      text-align: center;
    }

    nav.navbar a.active {
      outline: 2px solid #fff;
    }

    .stats-container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 1rem;
      background-color: var(--card-bg);
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    canvas {
      display: block;
      width: 100%;
      height: auto;
      margin: 0 auto 2rem;
    }

    footer {
      font-size: 0.85rem;
      color: #888;
      border-top: 1px solid #ccc;
      margin-top: 2rem;
      padding-top: 1rem;
    }

    @media (max-width: 768px) {
      nav.navbar {
        flex-direction: column;
        align-items: stretch;
      }

      nav.navbar a {
        width: 100%;
        font-size: 1rem;
      }

      h1 {
        font-size: 1.4rem;
      }

      .stats-container {
        padding: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Healthcare@ThreatPodium</h1>
    <button class="toggle" onclick="toggleDarkMode()">üåô Toggle Dark Mode</button>
  </header>

  <nav class="navbar">
    <a href="index.html">üè† Home</a>
    <a href="breaches.html">üìä Breaches</a>
    <a href="news.html">üì∞ News</a>
    <a href="stats.html" class="active">üìà Stats</a>
  </nav>

  <div class="stats-container">
    <!-- START-STATS-SECTION -->

<style>
canvas {
  width: 100% !important;
  max-width: 800px;
  height: 400px;
  margin: 0 auto 3rem;
  display: block;
}
.stats-container h2 {
  text-align: center;
  margin: 2rem 0 1rem;
}
</style>

<h2>üìä Breaches Over Time</h2>
<div style="text-align:center;margin-bottom:1rem;">
  <label for="range">View:</label>
  <select id="range" onchange="updateChart()">
    <option value="1">Last 1 Day</option>
    <option value="7" selected>Last 7 Days</option>
    <option value="30">Last 30 Days</option>
  </select>
</div>
<canvas id="breachChart"></canvas>

<h2>üó∫Ô∏è Breaches by State</h2>
<canvas id="stateChart"></canvas>

<h2>üß© Breaches by Type</h2>
<canvas id="typeChart"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const chartData = {
  1: { labels: [], data: [] },
  7: { labels: [], data: [] },
  30: { labels: [], data: [] }
};

const ctxTime = document.getElementById('breachChart').getContext('2d');
const ctxState = document.getElementById('stateChart').getContext('2d');
const ctxType = document.getElementById('typeChart').getContext('2d');

let breachChart = new Chart(ctxTime, {
  type: 'bar',
  data: {
    labels: chartData[7].labels,
    datasets: [{
      label: 'Breaches',
      data: chartData[7].data,
      backgroundColor: 'rgba(0, 119, 182, 0.6)',
      borderColor: 'rgba(0, 119, 182, 1)',
      borderWidth: 1
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    scales: {
      y: {
        beginAtZero: true,
        ticks: { precision: 0 }
      }
    }
  }
});

function updateChart() {
  const days = document.getElementById('range').value;
  breachChart.data.labels = chartData[days].labels;
  breachChart.data.datasets[0].data = chartData[days].data;
  breachChart.update();
}

new Chart(ctxState, {
  type: 'bar',
  data: {
    labels: ["GA", "CA", "IA", "PA", "IL", "AZ", "FL", "ID", "MD", "CO", "RI", "NC", "LA", "MN", "WV"],
    datasets: [{
      label: 'Breach Count by State',
      data: [3, 3, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1],
      backgroundColor: 'rgba(255, 99, 132, 0.6)',
      borderColor: 'rgba(255, 99, 132, 1)',
      borderWidth: 1
    }]
  },
  options: {
    indexAxis: 'y',
    responsive: true,
    maintainAspectRatio: false,
    scales: {
      x: {
        beginAtZero: true,
        ticks: { precision: 0 }
      }
    }
  }
});

new Chart(ctxType, {
  type: 'bar',
  data: {
    labels: ["Hacking/IT Incident", "Unauthorized Access/Disclosure", "Improper Disposal"],
    datasets: [{
      label: 'Breach Count by Type',
      data: [20, 9, 1],
      backgroundColor: 'rgba(54, 162, 235, 0.6)',
      borderColor: 'rgba(54, 162, 235, 1)',
      borderWidth: 1
    }]
  },
  options: {
    indexAxis: 'y',
    responsive: true,
    maintainAspectRatio: false,
    scales: {
      x: {
        beginAtZero: true,
        ticks: { precision: 0 }
      }
    }
  }
});
</script>


  </div>

  <footer>
    &copy; 2025 ThreatPodium. Powered by open data and smart automation.
  </footer>
</body>
</html>
